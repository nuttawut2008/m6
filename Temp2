#include <Wire.h>
#include <LiquidCrystal_I2C.h>

LiquidCrystal_I2C lcd(0x27, 16, 2); 
#define Apin A0

void setup() {
  pinMode(Apin, INPUT);
  Serial.begin(9600);
  lcd.init();
  lcd.clear();
  lcd.backlight(); 
  lcd.setCursor(0, 0);
  lcd.print("Temp:C     F    ");
}

void loop() {
  int value = analogRead(Apin);
  float voltage = value * (5.0 / 1023.0);             // แปลงเป็นแรงดัน
  float tempC = (voltage - 0.5) * 100.0;              // องศาเซลเซียส
  float tempF = tempC * 9.0 / 5.0 + 32.0;             // ฟาเรนไฮต์

  // แสดงผลบนจอ LCD
  lcd.setCursor(5, 1);
  lcd.print("     ");       // ล้างข้อมูลเก่า
  lcd.setCursor(5, 1);
  lcd.print(tempC, 1);       // องศา C มีทศนิยม 1 ตำแหน่ง

  lcd.setCursor(11, 1);
  lcd.print("     ");       // ล้างข้อมูลเก่า
  lcd.setCursor(11, 1);
  lcd.print(tempF, 1);       // องศา F มีทศนิยม 1 ตำแหน่ง

  // แสดงใน Serial Plotter (แนะนำให้เปิด Tools > Serial Plotter)
  Serial.print("Celsius: ");
  Serial.print(tempC);
  Serial.print("\tFahrenheit: ");
  Serial.println(tempF);

  // สำหรับ Serial Plotter ให้ออกเป็นฟอร์แมตเดียวกันทุกครั้ง
  Serial.print(tempC); Serial.print("\t"); Serial.println(tempF); // แบบเส้นกราฟ

  delay(1000);
}
